/* Desativa o efeito de desfoque (backdrop-blur) em modais e outros elementos
    quando a classe 'iphone-device' está presente no body ou em um container.
    Isso melhora drasticamente a performance de abertura do modal. */
.iphone-device .backdrop-blur-sm,
.iphone-device [style*="backdrop-filter: blur"],
.iphone-device [style*="-webkit-backdrop-filter: blur"] {
    -webkit-backdrop-filter: none !important;
    backdrop-filter: none !important;
}

/* Desabilitar backdrop-blur no iPhone para evitar sobrecarga de memória/CPU */
@media only screen and (max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2) {

    .no-blur-iphone,
    .backdrop-blur,
    .backdrop-blur-md,
    .backdrop-blur-lg {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
    }
}

/* Otimizações específicas para iPhone */

/* Safe area para iPhone X e posteriores */
.iphone-device {
    --safe-area-inset-top: env(safe-area-inset-top, 0px);
    --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-inset-left: env(safe-area-inset-left, 0px);
    --safe-area-inset-right: env(safe-area-inset-right, 0px);
}

.safe-area-top {
    padding-top: var(--safe-area-inset-top);
}

.safe-area-bottom {
    padding-bottom: var(--safe-area-inset-bottom);
}

.safe-area-left {
    padding-left: var(--safe-area-inset-left);
}

.safe-area-right {
    padding-right: var(--safe-area-inset-right);
}

/* Melhor scrolling para iOS */
.ios-scroll-smooth {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
}

/* Touch manipulation otimizada */
.touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
}

/* Feedback de toque específico para iOS */
.ios-touch-feedback {
    transition: opacity 0.1s ease;
}

.ios-touch-feedback:active {
    opacity: 0.3;
}

/* Otimizações gerais para iPhone */
.iphone-optimized {
    /* Prevent zoom on inputs */
    -webkit-text-size-adjust: 100%;
    /* Smooth scrolling */
    -webkit-overflow-scrolling: touch;
    /* Remove blue highlight */
    -webkit-tap-highlight-color: transparent;
}

/* Botões otimizados para iPhone */
.iphone-optimized button {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
}

/* Inputs otimizados para iPhone */
.iphone-optimized input {
    /* Prevent zoom */
    font-size: 16px;
    appearance: none;
    -webkit-appearance: none;
    border-radius: 0;
}

/* Scrollbar customizada para iPhone */
.iphone-optimized .scrollbar-hide {
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.iphone-optimized .scrollbar-hide::-webkit-scrollbar {
    display: none;
}

/* Animações otimizadas para iPhone */
@media (prefers-reduced-motion: no-preference) {
    .iphone-optimized * {
        will-change: auto;
    }
}

/* Otimizações específicas para iPhone SE e dispositivos menores */
@media screen and (max-width: 375px) and (-webkit-device-pixel-ratio: 2) {
    .iphone-device .category-bar-container {
        padding: 0.5rem 1rem;
    }

    .iphone-device .sticky {
        padding-top: 1rem;
    }
}

/* Otimizações para iPhone Pro Max */
@media screen and (min-width: 414px) and (-webkit-device-pixel-ratio: 3) {
    .iphone-device .sticky {
        padding-top: 1.5rem;
    }
}

/* Melhorar performance em iPhone com menor resolução */
@media screen and (max-device-width: 812px) and (-webkit-device-pixel-ratio: 3) {
    .iphone-optimized .motion-reduce {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Otimizar imagens para iPhone */
.iphone-optimized img {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: optimize-contrast;
}

/* Melhorar legibilidade de texto em iPhone */
.iphone-optimized {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
}

/* Otimizações para modo escuro do iPhone */
@media (prefers-color-scheme: dark) {
    .iphone-device {
        color-scheme: dark;
    }
}

/* Melhorar contraste para acessibilidade no iPhone */
@media (prefers-contrast: high) {
    .iphone-device .bg-gray-800 {
        background-color: #1a1a1a;
    }

    .iphone-device .text-yellow-500 {
        color: #fbbf24;
    }
}

/* Otimizar para orientação do iPhone */
@media screen and (orientation: landscape) and (max-height: 500px) {
    .iphone-device .sticky {
        padding-top: 0.5rem;
        padding-bottom: 0.25rem;
    }

    .iphone-device .category-bar-container {
        padding: 0.25rem 1rem;
    }
}